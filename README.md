# 臺北市長照資源空間分析系統

這是一個基於 Vue.js
3、Leaflet 地圖和 Pinia 狀態管理的長期照護資源空間分析視覺化平台。

## 🎯 專案目標

提供一個整合性的資訊平台，讓使用者能夠：

- 📍 查看臺北市長照機構、醫療設施的空間分布
- 📊 分析不同區域的人口統計資料
- 💡 透過互動式地圖進行資源配置分析
- 📈 檢視各區域的長照需求與供給關係

## ✨ 功能特色

### 🗺️ 互動式地圖系統

- **多圖層顯示**: 支援長照機構、醫療設施、人口統計等多種資料圖層
- **圖層顏色識別**: 每個圖層具有獨特的隨機生成顏色，便於區分
- **開關控制**: 使用現代化的開關UI控制圖層顯示/隱藏
- **動態載入**: 圖層資料按需載入，提升系統效能

### 📊 資料視覺化

- **分頁式界面**: 地圖視圖與數據儀表板無縫切換
- **資料表格**: 多圖層分頁式資料表格，支援排序與搜尋
- **位置定位**: 點擊"顯示位置"按鈕可在地圖上精確定位資料點
- **統計摘要**: 顯示各圖層的統計資訊與資料摘要

### 🎛️ 響應式佈局

- **三面板設計**: 左側控制面板、中央地圖區域、右側資訊面板
- **可調整面板**: 支援拖拽調整面板寬度與高度
- **自適應設計**: 適配不同螢幕尺寸的響應式佈局

## 📁 資料圖層

### 🏥 長照機構

- **老人福利機構**: 臺北市老人福利機構分布位置

### 🏥 醫療設施

- **醫院**: 臺北市醫院分布位置
- **診所**: 臺北市診所分布位置
- **健保特約藥局**: 臺北市健保特約藥局分布位置

### 📊 基礎地理資料

- **三段年齡組性別人口統計**: 村里級人口結構資料
- **五歲年齡組性別人口統計**: 村里級詳細年齡結構
- **十歲年齡組性別人口統計**: 村里級年齡分組統計
- **綜稅綜合所得總額**: 村里級所得統計資料

## 🛠️ 技術架構

### 前端技術

- **Vue.js 3**: 使用 Composition API 的現代前端框架
- **Pinia**: 輕量級狀態管理解決方案
- **Leaflet**: 開源互動式地圖庫
- **Bootstrap 5**: 響應式 UI 框架

### 開發工具

- **Vue CLI**: 專案建構與開發工具
- **ESLint**: 程式碼品質檢查
- **Prettier**: 程式碼格式化工具

## 🚀 開發環境設置

### 系統需求

- Node.js 16.0 或更高版本
- npm 或 yarn 套件管理器

### 安裝步驟

1. **克隆專案**

```bash
git clone [專案網址]
cd long-term-care-web
```

2. **安裝依賴**

```bash
npm install
```

3. **啟動開發伺服器**

```bash
npm run dev
```

4. **開啟瀏覽器**

```
http://localhost:8080
```

### 其他指令

```bash
# 建構生產版本
npm run build

# 執行程式碼檢查
npm run lint

# 執行測試
npm run test
```

## 📂 專案結構

```
src/
├── views/              # 主要頁面組件
│   ├── HomeView.vue    # 主頁面 (整體佈局)
│   ├── LeftView.vue    # 左側控制面板
│   ├── MiddleView.vue  # 中央內容區域
│   ├── UpperView.vue   # 上方分頁容器
│   ├── MapTab.vue     # 地圖視圖
│   ├── DashboardTab.vue # 儀表板視圖
│   ├── BottomView.vue  # 底部面板
│   └── RightView.vue   # 右側資訊面板
├── tabs/              # 分頁組件
│   └── DataTableTab.vue # 資料表格分頁
├── stores/            # Pinia 狀態管理
│   └── dataStore.js   # 主要資料存儲
├── utils/             # 工具函數
│   └── dataProcessor.js # 資料處理工具
├── components/        # 可重用組件
└── assets/           # 靜態資源
```

## 🎨 設計特色

### 圖層顏色系統

- 每個圖層自動生成獨特的隨機顏色
- 顏色範圍控制在 RGB(100-255) 確保可視性
- 左側面板顯示圖層顏色指示器

### 互動體驗

- 現代化開關控制圖層顯示
- 平滑的地圖動畫與過渡效果
- 直觀的拖拽調整面板大小功能

### 資料整合

- 支援 CSV 和 GeoJSON 格式資料
- 智能的資料處理與統計計算
- 高效的圖層管理與快取機制

## 🔧 關鍵功能實現

### 圖層管理

```javascript
// 圖層定義包含顏色屬性
{
  id: '醫院',
  name: '醫院',
  visible: false,
  color: generateRandomColor(), // 隨機顏色
  data: null,
  // ...
}
```

### 位置定位

- 表格"顯示位置"功能使用精確的ID匹配
- 支援跨圖層的要素查找與定位
- 自動切換到地圖視圖並高亮顯示目標

### 效能優化

- 按需載入圖層資料
- 智能的地圖圖層管理
- 防止記憶體洩漏的清理機制

## 🐛 故障排除

### 常見問題

1. **地圖圖層消失**

   - 切換分頁時自動重新載入圖層
   - 實施安全的圖層移除機制

2. **動畫衝突錯誤**

   - 在圖層操作前停止地圖動畫
   - 使用 try-catch 處理動畫相關錯誤

3. **效能問題**
   - 限制同時顯示的圖層數量
   - 使用防抖技術優化使用者互動

## 📄 授權條款

MIT License - 詳見 LICENSE 檔案

## 🤝 貢獻指南

歡迎提交 Issue 和 Pull Request 來改進這個專案。

## 📞 聯絡資訊

如有問題或建議，請透過 Issue 系統聯絡開發團隊。
